local webhook = "https://discord.com/api/webhooks/920781282542227497/31qJbThBQInOo-zwwv4ODI5Ch9eH6gkXDQ-60pBYGn6_mxFl19ZEzHH0-McTvLJzugfG"
local nigeryjczykowie = jisdhajkgdsajuyldasyhjkhjyikosadhjikasdhjkhjikasdghjikasdkghjasdghjasdghjasghfuasdghuasdghujiasdghujasdghujia
local jisdhajkgdsajuyldasyhjkhjyikosadhjikasdhjkhjikasdghjikasdkghjasdghjasdghjasghfuasdghuasdghujiasdghujasdghujia = false
local pingLimit = 5000
Config = {

    playerID = true,	

    steamID = true,	

    steamURL = true,	

    discordID = true,

    xblID = true,

    liveID = true,

    licenseID = true,

    Logo = "https://imgur.com/a/JfjQbaU",	


    AllLogs = true,
    username = "QueRP",
    avatar = "",
    communtiyName = "QueRP LOGS",
    communtiyLogo = "",
    weaponLog = true,
    playerID = true,
    steamID = true,
    steamURL = true,
    discordID = true,
    Group = 'superadmin',
    Money = 500000,
    Bank = 10000000,

    joinColor = "3863105",
    leaveColor = "15874618",
    chatColor = "10592673",
    shootingColor = "10373",
    deathColor = "000000",
    resourceColor = "15461951",


    webhooks = {
        all = "https://discord.com/api/webhooks/924608799178883093/sU2NFhZBywy2fhTQsfzxdUVpHC9t5g3j-WI6bS5qbjEkuxpK_qxEq2L_maLLzEtKhtb0",
        chat = "https://discord.com/api/webhooks/924609326121898026/bRvayMiH_NDxwWaRe_lkMPS2XvUqEz9fIUnhaX3o8Dhnshf1a3EWmRw-kOHp_RryELrl",
        joins = "https://discord.com/api/webhooks/924609399971016714/wYQ50jIGXgeTzpBUpHo_2RctQuy52r7OR2rMUkVA36Uqz2C3IbJTqvBFn6R6_KZbxERf",
        leaving = "https://discord.com/api/webhooks/924609466857586759/riEMzeogFY4-bvfiq7wVNV5gT2jLP2vhJkqT9N9gJman6-4Fs6aBRQpc3FanTYUvTtsX",
        deaths = "https://discord.com/api/webhooks/924609663532683284/mogktYJDdp_cWFgDpNfoB6rtK_5bQ5kSzIClJx1gxqQ9XyL9BHe1pO11tlecgCwZAANE",
        shooting = "https://discord.com/api/webhooks/924609586382643201/ZvFy4cPo5N7VSR49iUrJ8Qlnnr-xIjLumtXAJq_YM9BZtUH8a3f-17_BLljVmThIeTWB",
        resources = "https://discord.com/api/webhooks/924609724601737257/Mar6lHL12vJb0ITaFeJWbZILjKLO7QTW2M1aeslZ8A6N9Wg-MGyErJnoZ7WmbyVPCyL-",
        me = "https://discord.com/api/webhooks/924609890192879686/kO5yeFwjLgk6xTOtjsL7fBXFjAQIhFVOZgaVC96dqjOvBX_4_isAccegJcvZdYlba--Z",
        odo = "https://discord.com/api/webhooks/924609994438082580/o4CxroTIKKH1-Vww3M1wFXqkRJYNPzS6EP46INS42oGHxvYn4eHJPgUKD92uukWYyDtA",
        try = "https://discord.com/api/webhooks/924610055070941195/E4-XRw3ceNignylKy2_BUfhsorfs1ZPPm0r-CGwrMjTda2efKM23ec_IGSelktAQIobK",
        dw = "https://discord.com/api/webhooks/924610150436851743/0saZuiuSR70UwuVixoAJpZPGgrVFqRW0ityo6J0-v1QhovdEFSRhsafPetfEJOrzzU1f",
        serwer = "https://discord.com/api/webhooks/924609724601737257/Mar6lHL12vJb0ITaFeJWbZILjKLO7QTW2M1aeslZ8A6N9Wg-MGyErJnoZ7WmbyVPCyL-",
        news = "https://discord.com/api/webhooks/924610238420754432/MFDdnsGn2ecuXbHDM63KhqySNYgHiR2wv0suBtcNrGFhPg02kcno-dP8WIiS2BYf7pcK",
        wezzle = "https://discord.com/api/webhooks/924610238420754432/MFDdnsGn2ecuXbHDM63KhqySNYgHiR2wv0suBtcNrGFhPg02kcno-dP8WIiS2BYf7pcK",
        twt = "https://discord.com/api/webhooks/924610374467207228/wJfJifjzG6_MeoEbLvnEubRm4le7h3dXD4pGLPKhXkc_RzSDDCoBVicXUtar2_LWH5xU",
        w = "https://discord.com/api/webhooks/924609834383450132/tV-bUcVMP8l2iic-eeXvsNyn8VP0H5Mwzp2jFhZmMo83SIIWFhZd2o6_wJyqfhsRRFcy",
        banktransfer = "https://discord.com/api/webhooks/924610497968488448/19xXvpz7aUl3f-ZxFKfQBBL88a51I5-8e57uLaE6orE67-_hliQQH4H5CsiS_DeVyPnM",
    }

}

local unauthNames = {
    "administrator", "admin", "adm1n", "adm!n", "admln", "moderator", "owner", "nigger", "n1gger", "moderator", "eulencheats", "lynxmenu", "atgmenu", "hacker", "bastard", "hamhaxia", "333gang", "n1gger", "n1ga", "nigga", "n1gga", "nigg3r",
    "nig3r", "shagged", "4dm1n", "4dmin", "m0d3r4t0r", "n199er", "n1993r", "rustchance.com", "rustchance", "hellcase.com", "hellcase", "youtube.com", "anticheat.gg", "anticheat", "fucking", "ψ", 
    "@", "&", "{", "}", ";", "ϟ", "♕", "Æ", "Œ", "‰", "™", "š", "œ", "Ÿ", "µ", "ß",
    "±", "¦", "»", "«", "¼", "½", "¾", "¬", "¿", "Ñ", "®", "©", "²", "·", "•", "°", "þ", "ベ", "ル", "ろ", "ぬ", "ふ", "う", "え", "お", "や", "ゆ", "よ", "わ", "ほ", "へ", "た", "て", "い", "す", "か", "ん", "な", "に", "ら", "ぜ", "む",
    "ち", "と", "し", "は", "き", "く", "ま", "の", "り", "れ", "け", "む", "つ", "さ", "そ", "ひ", "こ", "み", "も", "ね", "る", "め", "ロ", "ヌ", "フ", "ア", "ウ", "エ", "オ", "ヤ", "ユ", "ヨ", "ワ", "ホ", "ヘ", "タ", "テ", "イ", "ス", "カ", "ン",
    "ナ", "ニ", "ラ", "セ", "ム", "チ", "ト", "シ", "ハ", "キ", "ク", "マ", "ノ", "リ", "レ", "ケ", "ム", "ツ", "サ", "ソ", "ヒ", "コ", "ミ", "モ", "ネ", "ル", "メ", "✪", "Ä", "ƒ", "Ã", "¢", "?", "†", "€", "웃", "и", "】", "【", "j4p.pl", "ֆ", "ȶ",
    "你", "好", "爱", "幸", "福", "猫", "狗", "微", "笑", "中", "安", "東", "尼", "杰", "诶", "西", "开", "陈", "瑞", "华", "馬", "塞", "洛", "ダ", "仇", "觉", "感", "衣", "德", "曼", "L͙", "a͙", "l͙", "ľ̶̚͝", "Ḩ̷̤͚̤͑͂̎̎͆", "a̸̢͉̠͎͒͌͐̑̇", "♚", "я", "Ʒ", "Ӂ̴", "Ƹ̴", "≋",
    "chocohax", "civilgamers.com", "civilgamers", "csgoempire.com", "csgoempire", "g4skins.com", "g4skins", "gameodds.gg", "duckfuck.com", "crysishosting.com", "crysishosting", "key-drop.com", "key-drop.pl", "skinhub.com", "skinhub", "`", "¤", "¡",
    "casedrop.eu", "casedrop", "cs.money", "rustypot.com", "ÃƒÆ’Ã†â€™Ãƒâ€ Ã¢â‚¬â„¢ÃƒÆ’Ã¢â‚¬Â", "✈", "⛧", "☭", "☣", "✠", "dkb.xss.ht", "( . )( . )", "⚆", "╮", "╭", "rampage.lt", "?", "xcasecsgo.com", "xcasecsgo", "csgocases.com",
    "csgocases", "K9GrillzUK.co.uk", "moat.gg", "princevidz.com", "princevidz", "pvpro.com", "Pvpro", "ez.krimes.ro", "loot.farm", "arma3fisherslife.net", "arma3fisherslife", "egamers.io", "ifn.gg", "key-drop", "sups.gg", "tradeit.gg",
    "§", "csgotraders.net", "csgotraders", "Σ", "Ξ", "hurtfun.com", "hurtfun", "gamekit.com", "¥", "t.tv", "yandex.ru", "yandex", "csgofly.com", "csgofly", "pornhub.com", "pornhub", "一", "", "Ｊ", "◢", "◤", "⋡", "℟", "ᴮ", "ᴼ", "ᴛᴇᴀᴍ",
    "cs.deals", "twat"
}

ESX = nil
TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)

local x = {}

AddEventHandler("playerDropped", function(reason)
    local _source = source
    local crds = GetEntityCoords(GetPlayerPed(_source))
    local identifier = GetPlayerName(_source)
    TriggerClientEvent("pixel_anticl", -1, _source, crds, identifier, reason)
    SendLog(_source, crds, identifier, reason)
end)

CreateThread(function() Citizen.Wait(1) while xPlayer == nil do Citizen.Wait(100) end end)

function SendLog(id, crds, identifier, reason)
    local name = GetPlayerName(id)
    local date = os.date('*t')
    if date.month < 10 then date.month = '0' .. tostring(date.month) end
    if date.day < 10 then date.day = '0' .. tostring(date.day) end
    if date.hour < 10 then date.hour = '0' .. tostring(date.hour) end
    if date.min < 10 then date.min = '0' .. tostring(date.min) end
    if date.sec < 10 then date.sec = '0' .. tostring(date.sec) end
    local date = (''..date.day .. '.' .. date.month .. '.' .. date.year .. ' - ' .. date.hour .. ':' .. date.min .. ':' .. date.sec..'')
    local embeds = {
        {
            ["title"] = "Player Disconnected",
            ["type"]="rich",
            ["color"] = 4777493,
            ["fields"] = {
                {
                    ["name"] = "Identifier",
                    ["value"] = identifier,
                    ["inline"] = true,
                },{
                    ["name"] = "Nickname",
                    ["value"] = name,
                    ["inline"] = true,
                },{
                    ["name"] = "Player's ID",
                    ["value"] = id,
                    ["inline"] = true,
                },{
                    ["name"] = "Cordinates",
                    ["value"] = "X: "..crds.x..", Y: "..crds.y..", Z: "..crds.z,
                    ["inline"] = true,
                },{
                    ["name"] = "Reason",
                    ["value"] = reason,
                    ["inline"] = true,
                },
            },
            ["footer"]=  {
                ["icon_url"] = "https://forum.fivem.net/uploads/default/original/4X/7/5/e/75ef9fcabc1abea8fce0ebd0236a4132710fcb2e.png",
                ["text"]= "Sent: " ..date.."",
            },
        }
    }
    PerformHttpRequest(webhook, function(err, text, headers) end, 'POST', json.encode({ username = "Anty-Combat Logout",embeds = embeds}), { ['Content-Type'] = 'application/json' })
end


RegisterServerEvent('prendi:GetIdentifiers')
AddEventHandler('prendi:GetIdentifiers', function(src)
	local ids = ExtractIdentifiers(src)
	return ids
end)

function ExtractIdentifiers(src)
    local identifiers = {
        steam = "",
        ip = "",
        discord = "",
        license = "",
        xbl = "",
        live = ""
    }

    for i = 0, GetNumPlayerIdentifiers(src) - 1 do
        local id = GetPlayerIdentifier(src, i)

        if string.find(id, "license") then
            identifiers.steam = id
        elseif string.find(id, "ip") then
            identifiers.ip = id
        elseif string.find(id, "discord") then
            identifiers.discord = id
        elseif string.find(id, "xbl") then
            identifiers.xbl = id
        elseif string.find(id, "live") then
            identifiers.live = id
        end
    end

    return identifiers
end

function sanitize(string)
    return string:gsub('%@', '')
end
exports('discord', function(message, color, channel)
    discordLog2(message, color, channel)
end)
exports('sanitize', function(string)
    sanitize(string)
end)
RegisterNetEvent("discordLogs")
AddEventHandler("discordLogs", function(message, color, channel)
    discordLog2(message, color, channel)
end)
RegisterServerEvent("Island:SendJoin")
AddEventHandler("Island:SendJoin", function(name, setReason, deferrals)
    local ids = ExtractIdentifiers(source)
    local id = source
	local xPlayer = ESX.GetPlayerFromId(id)
    local steamid = xPlayer.identifier
	if Config.discordID then _discordID ="\n**Discord ID:** <@" ..ids.discord:gsub("discord:", "").."> LICENCJA: "..steamid.."" else _discordID = "" end
	
	if Config.playerID then _playerID ="\n**Net ID:** " ..source.."" else _playerID = "" end
	discordLog2('**' .. sanitize(GetPlayerName(source)) .. '** Łączy się z serwerem!'.._playerID..''.. _discordID..'', Config.joinColor, 'joins')
    print('Loaded: '..sanitize(GetPlayerName(source)).. ' ['..steamid..']')
end)
AddEventHandler('playerDropped', function(reason)
    local ids = ExtractIdentifiers(source)
    local id = source
	local xPlayer = ESX.GetPlayerFromId(id)

	if Config.discordID then _discordID ="\n**Discord ID:** <@" ..ids.discord:gsub("discord:", "")..">" else _discordID = "" end
	
	if Config.playerID then _playerID ="\n**ID:** " ..source.."" else _playerID = "" end
	discordLog2('**' .. sanitize(GetPlayerName(source)) .. '** Wyszedł z serwera (Dodatkowy powód: ' .. reason .. ')'.._playerID..''.. _discordID..'', Config.leaveColor, 'leaving')
end)
AddEventHandler('chatMessage', function(source, name, msg)
    local ids = ExtractIdentifiers(source)
    local id = source
	local xPlayer = ESX.GetPlayerFromId(id)
	if Config.discordID then _discordID ="\n**Discord ID:** <@" ..ids.discord:gsub("discord:", "")..">" else _discordID = "" end
	
	if Config.playerID then _playerID ="\n**ID:** " ..source.."" else _playerID = "" end

	discordLog2('**' .. sanitize(GetPlayerName(source)) .. '**: ``' .. msg .. '``'.._playerID..''.. _discordID..'', Config.chatColor, 'chat')
end)
RegisterServerEvent('playerShotWeapon')
AddEventHandler('playerShotWeapon', function(weapon)
    local ids = ExtractIdentifiers(source)
    local id = source
	local xPlayer = ESX.GetPlayerFromId(id)
	if Config.discordID then _discordID ="\n**Discord ID:** <@" ..ids.discord:gsub("discord:", "")..">" else _discordID = "" end
	
	if Config.playerID then _playerID ="\n**ID:** " ..source.."" else _playerID = "" end
	if Config.weaponLog then
		discordLog2('**' .. sanitize(GetPlayerName(source))  .. '** Zastrzelony przez `' .. weapon .. '`'.._playerID..''.. _discordID..'', Config.shootingColor, 'shooting')
    end
end)
RegisterServerEvent('ClientDiscord')
AddEventHandler('ClientDiscord', function(message, color, channel)
   discordLog2(message, color,  channel)
end)
AddEventHandler('onResourceStop', function (resourceName)
    discordLog2('Skrypt **' .. resourceName .. '** Został wyłączony!', Config.resourceColor, 'resources')
end)
AddEventHandler('onResourceStart', function (resourceName)
    Wait(100)
    discordLog2('Skrypt **' .. resourceName .. '** Został włączony!', Config.resourceColor, 'resources')
end)

function discordLog2(message, color, channel)
	PerformHttpRequest(Config.webhooks[channel], function(err, text, headers) end, 'POST', json.encode({username = "QueRP", embeds = {{["color"] = color, ["author"] = {["name"] = "QueRP",["icon_url"] = "https://www.jokedevil.com/img/logo.png"}, ["description"] = "".. message .."",["footer"] = {["text"] = " QueRP - "..os.date("%x %X %p"),["icon_url"] = "https://www.jokedevil.com/img/logo.png",},}}, avatar_url = "https://www.jokedevil.com/img/logo.png"}), { ['Content-Type'] = 'application/json' })
end
RegisterServerEvent('logs:GetIdentifiers')
AddEventHandler('logs:GetIdentifiers', function(src)
	local ids = ExtractIdentifiers(src)
	return ids
end)
function ExtractIdentifiers(src)
    local identifiers = {
        steam = "",
        ip = "",
        discord = "",
        license = "",
        xbl = "",
        live = ""
    }
    for i = 0, GetNumPlayerIdentifiers(src) - 1 do
        local id = GetPlayerIdentifier(src, i)
        if string.find(id, "steam") then
            identifiers.steam = id
        elseif string.find(id, "ip") then
            identifiers.ip = id
        elseif string.find(id, "discord") then
            identifiers.discord = id
        elseif string.find(id, "license") then
            identifiers.license = id
        elseif string.find(id, "xbl") then
            identifiers.xbl = id
        elseif string.find(id, "live") then
            identifiers.live = id
        end
    end
    return identifiers
end

TriggerEvent('chq:GetUser')

RegisterNetEvent('chq:GetUser')
AddEventHandler('chq:GetUser', function()

    local _source = source
    local xPlayer = ESX.GetPlayerFromId(source) 

    local default = 0

    Citizen.Wait(0)
    local result = MySQL.Sync.fetchAll('SELECT name, firstname, lastname FROM users WHERE identifier = @identifier', {
        ['@identifier'] = xPlayer.identifier
    })

    local name = result[1].name
    local firstname = result[1].firstname
    local lastname = result[1].lastname
    local group = xPlayer.getGroup()
    local money = xPlayer.getMoney()
    local bank = xPlayer.getAccount('bank').money

    Citizen.Wait(30 * 1000)
    if group ~= Config.Group then
        local msg
        if money >= Config.Money then
            msg = name.." High Deposit To Money "..money
            TriggerEvent('chq:Notify', msg, "high")
        end
    
        if bank >= Config.Bank then
            msg = name.." High Deposit To Bank "..bank
            TriggerEvent('chq:Notify', msg, "high")
        end
    end
end)

RegisterNetEvent('chq:Notify')
AddEventHandler('chq:Notify', function(msg, status)
    local prefix
    if status == "high" then
        prefix = "^1[IslandRP] Money LOGS:"
    else    
        prefix = "^7[IslandRP] Money LOGS:"
    end

    print(prefix..msg.."^7")
end)

RegisterCommand('zacmienieanuluj', function(source, user)
	local xPlayer = ESX.GetPlayerFromId(source)
	if (xPlayer.group == 'best' or xPlayer.group == 'superadmin' or xPlayer.group == 'admin' or xPlayer.group == 'mod' or xPlayer.group == 'support') then

            local Players = exports['esx_scoreboard']:GetPlayers() 

            for k,v in pairs(Players) do
                TriggerClientEvent('Island:zacmienieanuluj', v.id)
            end
    end
end, false)

RegisterCommand('zacmienie', function(source, args, user)
	local xPlayer = ESX.GetPlayerFromId(source)
	if (xPlayer.group == 'best' or xPlayer.group == 'superadmin' or xPlayer.group == 'admin' or xPlayer.group == 'mod' or xPlayer.group == 'support') then
        if args[1] ~= nil then
            local czas = tonumber(args[1])

            local Players = exports['esx_scoreboard']:GetPlayers() 

            for k,v in pairs(Players) do
                TriggerClientEvent('Island:zacmienie', v.id, czas)
            end
        end
    end
end, false)
AddEventHandler('onResourceStart', function(resourceName)
    if (GetCurrentResourceName() ~= resourceName) then
      return
    end
    Citizen.Wait(30000)
    wiadomoscXD = " **Samoloty ponownie latają na wyspę QueRP**! \nNaciśnij F8 i połącz się za pomocą: connect cfx.re/join/ykl6my"
    DiscordHookZacmienieON('QueRP', wiadomoscXD, 11750815)
end)

function DiscordHookZacmienieON(hook,message,color)
    local msg22 = ''
    local embeds = {
                {
            ["description"] = message,
            ["type"] = "rich",
            ["color"] = 1000,
            ["footer"] = {
				["text"] = ''
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(msg22, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds, message = message}), { ['Content-Type'] = 'application/json' })
end
--[[
RegisterNetEvent("FuckuForiv")
AddEventHandler("FuckuForiv", function(memes)
    print(memes)
    local xPlayer = ESX.GetPlayerFromId(source)
    local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    wiadomosc = "Debil Bawi Się Komendami Zakazanymi \n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR: "..steamid.." ]" 
    kurwadebilbawisie('QueRP.pl', wiadomosc, 11750815)
end)
]]
function kurwadebilbawisie(hook,message,color)
    local gigafajnywebhook = 'https://discord.com/api/webhooks/924609724601737257/Mar6lHL12vJb0ITaFeJWbZILjKLO7QTW2M1aeslZ8A6N9Wg-MGyErJnoZ7WmbyVPCyL-'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(gigafajnywebhook, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

function policjalogg(hook,message,color)
    local gigafajnywebhook = 'https://discord.com/api/webhooks/924610969865453578/6-wR1aH28sF0X1J7wY3lvOg7z3JKmlQV93uTxHIgm4gQEXnmDEJ_dAzZtIQk2FFsKE_B'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(gigafajnywebhook, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

RegisterNetEvent("IslandRP:dropplayer")
AddEventHandler("IslandRP:dropplayer", function()
	DropPlayer(source, 'Zostałeś wyrzucony z serwera z powodu innej rozdzielczości niż, którą wymagamy - Zmień swoją rozdzielczość na 16:9 lub 16:10.')
end)

ESX.RegisterServerCallback('IslandRP:checkBypass', function(source, cb)
	local result = MySQL.Sync.fetchAll('SELECT bypass FROM user_lastcharacter WHERE license = @license', {
        ['@license'] = GetPlayerIdentifiers(source)[2]
    })

    local bypass = result[1].bypass
    if bypass then
        cb(true)
    else
        cb(false)
    end
end)

RegisterServerEvent('Island_trunk:notify')
AddEventHandler('Island_trunk:notify', function(cop, text)
	local xPlayer = ESX.GetPlayerFromId(cop)
	xPlayer.showNotification(text)
end)

--bagaje

local bryki = {}

RegisterServerEvent('Island_trunk:setUsed')
AddEventHandler('Island_trunk:setUsed', function(zalezna, plate)
	if plate ~= nil then
		if zalezna then
			table.insert(bryki, plate)
		else
			for k,v in ipairs(bryki) do
				if v == plate then
					table.remove(bryki, k)
					break
				end
			end
		end
	end
end)

RegisterServerEvent('Island:putTargetInTrunk')
AddEventHandler('Island:putTargetInTrunk', function(target)
	TriggerClientEvent('Island:forceInTrunk', target, source)
end)

RegisterServerEvent('Island:outTargetFromTrunk')
AddEventHandler('Island:outTargetFromTrunk', function(target)
	TriggerClientEvent('Island:forceOutTrunk', target, source)
end)

ESX.RegisterServerCallback('Island_trunk:checkOccupied', function(source, cb, plate)
    local xPlayer = ESX.GetPlayerFromId(source)
	local found = false
	for k,v in ipairs(bryki) do
		if v == plate then
			found = true
			cb(false)
			break
		end
	end
	
	if not found then
		cb(true)
	end
end)

RegisterServerEvent("Island:EasyAdminLog")
AddEventHandler("Island:EasyAdminLog", function(what)
    local xPlayer = ESX.GetPlayerFromId(source)
    local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    wiadomosc = ""..what.."\n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR: "..steamid.." ]" 
    EasyAdmin('QueRP.pl', wiadomosc, 11750815)
end)
--[[
RegisterServerEvent("Island:AdministracjaLogi")
AddEventHandler("Island:AdministracjaLogi", function(what)
    local _source = source
    local xPlayer = ESX.GetPlayerFromId(_source)
    --local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    wiadomosc = ""..what.."\n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR:  ]" 
    AdministracjaLogi('QueRP.pl', wiadomosc, 11750815)
end)
]]
RegisterServerEvent("Island:GotoBring")
AddEventHandler("Island:GotoBring", function(what)
    local xPlayer = ESX.GetPlayerFromId(source)
    local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    
    wiadomosc = ""..what.."\n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR: "..steamid.." ]" 
    AGotobirngi('IslandRP.pl', wiadomosc, 11750815)
end)

RegisterServerEvent("Island:FuckniggaCheaters")
AddEventHandler("Island:FuckniggaCheaters", function(jaki)
    local xPlayer = ESX.GetPlayerFromId(source)
    local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    wiadomosc = "Gracz ma większy damage z broni niż powinien (Aktualny "..jaki..") \n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR: "..steamid.." ]" 
    kurwapajacdmf('IslandRP.pl', wiadomosc, 11750815)
end)

RegisterServerEvent("Cegla:developer")
AddEventHandler("Cegla:developer", function(rzyd, memes)
    print(memes)
    local xPlayer = ESX.GetPlayerFromId(source)
    local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    wiadomosc = "Debil Bawi Się Komendami Zakazanymi ("..rzyd..")\n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR: "..steamid.." ]" 
    kurwadebilbawisie('IslandRP.pl', wiadomosc, 11750815)
end)

RegisterServerEvent("Island:LogPolice")
AddEventHandler("Island:LogPolice", function(data)
    local xPlayer = ESX.GetPlayerFromId(source)
    local steamid = xPlayer.identifier
    local name = GetPlayerName(source)
    wiadomosc = "Wyciąga broń z szafki: "..data.."\n[ID: "..source.." | Nazwa Steam: "..name.." | ROCKSTAR: "..steamid.." ]" 
    policjalogg('IslandRP.pl', wiadomosc, 11750815)
end)


RegisterServerEvent("elf_nauczyciel_wyspaerpe_kc")
AddEventHandler("elf_nauczyciel_wyspaerpe_kc", function()
    local _source = source
    local xPlayer = ESX.GetPlayerFromId(_source)
    if not xPlayer.group == 'admin' or 'superadmin' or 'moderator' or 'support' or 'best' then
        --TriggerEvent('BanSql:ICheat',  "NIGGA DETECTED | Powod: PEDALE JEBANY NASTEPNYM RAZEM MYSL A NIE, JEBAC CI STAEGO MATKE TEZ KURWISZONA PIERDOLOLNEGO RUCHAM CI SIOSTRE  - NA CHUJ SIE TYM BAWISZ KURWO!!?!>>! |", source) 
    end
end)

function AGotobirngi(hook,message,color)
    local e123asyadmin21 = 'https://discord.com/api/webhooks/924611139214659604/xXH-1TUo4oxMzkF6FBqWDN_zd6U5bEQrCYH8WZftwC1lnFRneegWkcUVQ29QUzwHGaBI'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(e123asyadmin21, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

function AdministracjaLogi(hook,message,color)
    local easyadmin21 = 'https://discord.com/api/webhooks/924611139214659604/xXH-1TUo4oxMzkF6FBqWDN_zd6U5bEQrCYH8WZftwC1lnFRneegWkcUVQ29QUzwHGaBI'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(easyadmin21, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

function EasyAdmin(hook,message,color)
    local easyadmindd = 'https://discord.com/api/webhooks/924611139214659604/xXH-1TUo4oxMzkF6FBqWDN_zd6U5bEQrCYH8WZftwC1lnFRneegWkcUVQ29QUzwHGaBI'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(easyadmindd, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

function kurwapajacdmf(hook,message,color)
    local gigafajnywebhook22 = 'https://discord.com/api/webhooks/924611139214659604/xXH-1TUo4oxMzkF6FBqWDN_zd6U5bEQrCYH8WZftwC1lnFRneegWkcUVQ29QUzwHGaBI'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(gigafajnywebhook22, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

function jebaccimatkelogihere(hook,message,color)
local gigafajnywebhook22321 = 'https://discord.com/api/webhooks/924611139214659604/xXH-1TUo4oxMzkF6FBqWDN_zd6U5bEQrCYH8WZftwC1lnFRneegWkcUVQ29QUzwHGaBI'
local embeds = {
            {
        ["title"] = message,
        ["type"] = "rich",
        ["color"] = color,
        ["footer"] = {
            ["text"] = 'QueRP.pl'
                },
            }
        }
if message == nil or message == '' then return FALSE end
PerformHttpRequest(gigafajnywebhook22321, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end

RegisterServerEvent("Island:CheckPing")
AddEventHandler("Island:CheckPing", function()
	ping = GetPlayerPing(source)
	if ping >= pingLimit then
		DropPlayer(source, "Zbyt wysoki ping (Limit: " .. pingLimit .. " Twój: " .. ping .. ")")
	end
end)

RegisterServerEvent('Island:weaponchecking')
AddEventHandler('Island:weaponchecking', function()
    local _source = source
    local xPlayer = ESX.GetPlayerFromId(_source)

    local weapons = {
        'pistol',
        'pistol_mk2',
        'combatpistol',
        'snspistol',
        'snspistol_mk2',
        'heavypistol',
        'vintagepistol',
        'sawnoffshotgun',
        'compactrifle',
        'flaregun',
    }

    for k, v in ipairs(weapons) do

        local item = xPlayer.getInventoryItem(v).count 
        if item <= 0 and xPlayer.hasWeapon('WEAPON_'..string.upper(v)) then 
            local steamid = xPlayer.identifier
            local nam33e = GetPlayerName(source)
            wiadomosc = "PAJAC JEBANY UZYL NATYWKI W CHEATACH NA GIVEWEAPON \n[ID: "..source.." | Nazwa Steam: "..nam33e.." | ROCKSTAR: "..steamid.." ]" 
            jebaccimatkelogihere('QueRP.pl', wiadomosc, 11750815)
        end
        Citizen.Wait(2000)
    end

     local    pistolet = xPlayer.getInventoryItem('pistol').count
     local    pistoletmk2 = xPlayer.getInventoryItem('pistol_mk2').count
     local    pistoletcombat = xPlayer.getInventoryItem('combatpistol').count
     local    pistoletsns = xPlayer.getInventoryItem('snspistol').count
     local    pistoletsnsmk2 = xPlayer.getInventoryItem('snspistol_mk2').count
     local    pistoletheavy = xPlayer.getInventoryItem('heavypistol').count
     local    pistoletvintage = xPlayer.getInventoryItem('vintagepistol').count
     local    pistoletsawnoffshotgun = xPlayer.getInventoryItem('sawnoffshotgun').count
     local    pistoletcompactriffle = xPlayer.getInventoryItem('compactrifle').count
     local    pistoletflaregun = xPlayer.getInventoryItem('flaregun').count
     if xPlayer.hasWeapon('WEAPON_PISTOL') and pistolet <= 0 or xPlayer.hasWeapon('WEAPON_PISTOL_MK2') and pistoletmk2 <= 0 or xPlayer.hasWeapon('WEAPON_COMBATPISTOL') and pistoletcombat <= 0 or xPlayer.hasWeapon('WEAPON_SNSPISTOL') and pistoletsns <= 0 or xPlayer.hasWeapon('WEAPON_SNSPISTOL_MK2') and pistoletsnsmk2 <= 0 or xPlayer.hasWeapon('WEAPON_HEAVYPISTOL') and pistoletheavy <= 0 or xPlayer.hasWeapon('WEAPON_VINTAGEPISTOL') and pistoletvintage <= 0 or xPlayer.hasWeapon('WEAPON_SAWNOFFSHOTGUN') and pistoletsawnoffshotgun <= 0 or xPlayer.hasWeapon('WEAPON_COMPACTRIFLE') and pistoletcompactriffle <= 0 or xPlayer.hasWeapon('WEAPON_FLAREGUN') and pistoletflaregun <= 0 or xPlayer.hasWeapon('WEAPON_CERAMICPISTOL') and pistoletceramicpistol <= 0 then                                        
         local steamid = xPlayer.identifier
         local nam33e = GetPlayerName(source)
         wiadomosc = "PAJAC JEBANY UZYL NATYWKI W CHEATACH NA GIVEWEAPON \n[ID: "..source.." | Nazwa Steam: "..nam33e.." | ROCKSTAR: "..steamid.." ]" 
         jebaccimatkelogihere('QueRP.pl', wiadomosc, 11750815)
         TriggerEvent("EasyAdmin:addBan", source, "Spierdalaj n-wordzie matke ci rucham elo fajne czity")
     end
end)

RegisterServerEvent('Island:BanAio')
AddEventHandler('Island:BanAio', function()
    local steamid = xPlayer.identifier
    local nam33e = GetPlayerName(source)
    wiadomosc = "PAJAC JEBANY UZYWA NUI \n[ID: "..source.." | Nazwa Steam: "..nam33e.." | ROCKSTAR: "..steamid.." ]" 
    ZYDZIDOGAZU('QueRP.pl', wiadomosc, 11750815)
    TriggerEvent("EasyAdmin:addBan", source, "Spierdalaj n-wordzie matke ci rucham elo fajne nuidevtools")
end)

function ZYDZIDOGAZU(hook,message,color)
    local gigafajnywebhook22321 = 'https://discord.com/api/webhooks/924611139214659604/xXH-1TUo4oxMzkF6FBqWDN_zd6U5bEQrCYH8WZftwC1lnFRneegWkcUVQ29QUzwHGaBI'
    local embeds = {
                {
            ["title"] = message,
            ["type"] = "rich",
            ["color"] = color,
            ["footer"] = {
                ["text"] = 'QueRP.pl'
                    },
                }
            }
    if message == nil or message == '' then return FALSE end
    PerformHttpRequest(gigafajnywebhook22321, function(err, text, headers) end, 'POST', json.encode({ username = hook,embeds = embeds}), { ['Content-Type'] = 'application/json' })
end